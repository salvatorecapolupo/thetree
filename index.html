<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Albero N-ario Dinamico</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .tree ul {
      list-style-type: none;
      padding-left: 1rem;
      position: relative;
    }
    .tree li {
      margin: 0.5rem 0;
      padding-left: 1rem;
      position: relative;
    }
    .tree li::before {
      content: '';
      position: absolute;
      top: 0.75rem;
      left: 0;
      border-left: 1px solid #ccc;
      border-bottom: 1px solid #ccc;
      width: 1rem;
      height: 1rem;
    }
    .tree li::after {
      content: '';
      position: absolute;
      top: 1.75rem;
      left: 0;
      border-left: 1px solid #ccc;
      height: 100%;
    }
    .tree li:last-child::after {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2>Struttura Albero da JSON Remoto</h2>
    <div id="tree-container" class="tree">Caricamento...</div>
  </div>

  <!-- jQuery (necessario per Bootstrap 4) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    const JSON_URL = "https://gist.githubusercontent.com/salvatorecapolupo/428c601a6270414a9d1d6e8da422a508/raw/50f7fc32db98d0a88a4b365be30cab41c0cf8645/thelarch.json";

    // Funzione ricorsiva per creare l'albero
    function createTree(node) {
      const ul = document.createElement('ul');
      const li = document.createElement('li');
      li.textContent = node.name;
      ul.appendChild(li);

      if (node.children && node.children.length > 0) {
        node.children.forEach(child => {
          li.appendChild(createTree(child));
        });
      }

      return ul;
    }

    // Carica JSON da URL e genera albero
    fetch(JSON_URL)
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('tree-container');
        container.innerHTML = '';
        container.appendChild(createTree(data));
      })
      .catch(error => {
        console.error('Errore nel caricamento JSON:', error);
        document.getElementById('tree-container').innerHTML = '<div class="alert alert-danger">Errore nel caricamento dei dati.</div>';
      });
  </script>
</body>
</html>
